<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Logarithms, sequences, and limits</title>
    <meta charset="utf-8" />
    <meta name="author" content="MACS 33000   University of Chicago" />
    <script src="02-sequences-limits_files/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-menu.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Logarithms, sequences, and limits
]
.author[
### <a href="https://jmclip.github.io/MACSS_math_camp/">MACS 33000</a> <br /> University of Chicago
]

---







# Learning objectives

* Define logarithmic and exponential functions
* Practice simplifying power, logarithmic, and exponential functions
* Define sequences
* Distinguish convergence and divergence
* Define limits
* Define continuity
* Calculate limits of sequences and functions

---

# Logarithms and exponential functions

* Important component to many mathematical and statistical methods in social science
* Exponents
* Logarithms

---

# Functions with exponents

`$$f(x) = x \times x = x^2$$`

`$$f(x) = x \times x \times x = x^3$$`

&lt;img src="02-sequences-limits_files/figure-html/functions-with-exp-1.png" width="864" style="display: block; margin: auto;" /&gt;

---

# Common rules of exponents

* `\(x^0 = 1\)`
* `\(x^1 = x\)`
* `\(\left ( \frac{x}{y} \right )^a = \left ( \frac{x^a}{y^a}\right ) = x^a y^{-a}\)`
* `\((x^a)^b = x^{ab}\)`
* `\((xy)^a = x^a y^a\)`
* `\(x^a \times x^b = x^{a+b}\)`

---

# Logarithms

* Class of functions
* `\(\log_{b}(x) = a \Rightarrow b^a = x\)`
* What number `\(a\)` solves `\(b^a = x\)`

---

# Base 10

`$$\log_{10}(100) = 2 \Rightarrow 10^2 = 100$$`

`$$\log_{10}(0.1) = -1 \Rightarrow 10^{-1} = 0.1$$`

&lt;img src="02-sequences-limits_files/figure-html/log-base-10-1.png" width="864" style="display: block; margin: auto;" /&gt;

---

# Base 2

`$$\log_{2}(8) = 3 \Rightarrow 2^3 = 8$$`

`$$\log_{2}(1) = 0 \Rightarrow 2^0 = 1$$`

&lt;img src="02-sequences-limits_files/figure-html/log-base-2-1.png" width="864" style="display: block; margin: auto;" /&gt;

---

# Base `\(e\)`

* Natural logarithm

`$$\log_{e}(e) = 1 \Rightarrow e^1 = e$$`

&lt;img src="02-sequences-limits_files/figure-html/log-base-e-1.png" width="864" style="display: block; margin: auto;" /&gt;

* Natural logarithms are incredibly useful in math
* Often `\(\log()\)` is assumed to be a natural log (good to assume for homework, too!)
* Also seen as `\(\ln()\)`

---

# Rules of logarithms

* `\(\log_b(1) = 0\)`
* `\(\log(x \times y) = \log(x) + \log(y)\)`
* `\(\log(\frac{x}{y}) = \log(x) - \log(y)\)`
* `\(\log(x^y) = y \log(x)\)`

---

# Sequence

* A sequence is a function whose domain is the set of positive integers
* We'll write a sequence as, 

`$$\left\{u_{n} \right\}_{n=1}^{\infty} = (u_{1} , u_{2}, \ldots, u_{N}, \ldots )$$`

---

# Sequence

`$$\left\{\frac{1}{n} \right\} = (1, 1/2, 1/3, 1/4, \ldots, 1/N, \ldots, )$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-1-1.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

# Sequence

`$$\left\{\frac{1}{n^2} \right\} = (1, 1/4, 1/9, 1/16, \ldots, 1/N^2, \ldots, )   \\$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-2-1.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

# Sequence

`$$\left\{\frac{1 + (-1)^n}{2} \right\} = (0, 1, 0, 1, \ldots, 0,1,0,1 \ldots, ) \\$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-3-1.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

# Arithmetic progression

* A sequence `\(\{ u_n \}\)` with the property that the difference between each pair of successive terms is the same
    * `\(u_{n+1} - u_n\)` is the same for all `\(n\)`
* The arithmetic progression with first term `\(a\)` and common difference `\(d\)` is

    `$$a, a + d, a + 2d, a +3d, \ldots$$`
  
* The `\(n\)`th term is given by

    `$$u_n = a + (n-1)d$$`

---

# Arithmetic progression



---

# Geometric progression

* A sequence `\(\{ u_n \}\)` in which each term is obtained from the preceding one by multiplication by the same number:
    * The ratio `\(\frac{u_{n+1}}{u_n}\)` is the same for all `\(n\)`
* The geometric progression with first term `\(a\)` and common ratio `\(x\)` is

    `$$a, ax, ax^2, ax^3, \ldots$$`
  
* The `\(n\)`th term is given by

    `$$u_n = ax^{n-1}$$`

---

# Geometric progression



---

# Convergence

`$$\left\{\frac{(-1)^{n} }{n} \right \} = (-1, \frac{1}{2}, \frac{-1}{3}, \frac{1}{4}, \frac{-1}{5}, \frac{1}{6}, \frac{-1}{7}, \frac{1}{8}, \ldots )$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-convergence-1.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

# Convergence

A sequence `\(\left\{u_{n} \right\}_{n=1}^{\infty}\)` converges to a real number `\(A\)` if for each `\(\epsilon &gt;0\)` there is a positive integer `\(N\)` such that for all `\(n \geq N\)` we have `\(|u_{n} - A| &lt; \epsilon\)` 

--

* If a sequence converges, it converges to **one** number `\(A\)`
* `\(\epsilon&gt;0\)` is some **arbitrary** real-valued number
* `\(N\)` will depend upon `\(\epsilon\)`
* Implies the sequence never gets further than `\(\epsilon\)` away from `\(A\)`

--

## Divergence and boundedness

* If a sequence `\(\left\{u_{n} \right\}\)` converges we'll call it **convergent**
* If it doesn't we'll call it **divergent**
* If there is some number `\(M\)` such that, for all `\(n\)` `\(|u_{n}|&lt;M\)`, then we'll call it **bounded**

---

# An unbounded sequence

`$$\left\{ n \right \} = (1, 2, 3, 4, \ldots, N, \ldots )$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-unbounded-1.png" width="864" style="display: block; margin: auto;" /&gt;

---

# A bounded sequence that doesn't converge

`$$\left\{\frac{1 + (-1)^n}{2} \right\} = (0, 1, 0, 1, \ldots, 0,1,0,1 \ldots, )$$`

&lt;img src="02-sequences-limits_files/figure-html/seq-bounded-1.png" width="864" style="display: block; margin: auto;" /&gt;

--

* All convergent sequences are bounded
* If a sequence is **constant**, `\(\left\{C \right \}\)` it converges to `\(C\)`

---

# Algebra of sequences

Suppose `\(\left\{a_{n} \right \}\)` converges to `\(A\)` and `\(\left\{b_{n} \right\}\)` converges to `\(B\)`. Then,

* `\(\left\{a_{n} + b_{n} \right\}\)` converges to `\(A + B\)`
* `\(\left\{a_{n} b_{n} \right\}\)` converges to `\(A \times B\)`
* Suppose `\(b_{n} \neq 0 \forall n\)` and `\(B \neq 0\)`. Then `\(\left\{\frac{a_{n}}{b_{n}} \right\}\)` converges to `\(\frac{A}{B}\)`

---

# Algebra of sequences

* Consider the sequence `\(\left\{\frac{1}{n} \right\}\)` - what does it converge to?
* Consider the sequence `\(\left\{\frac{1}{2n} \right \}\)` - what does it converge to?

--

&lt;img src="02-sequences-limits_files/figure-html/converge-similar-denominator-1.png" width="864" style="display: block; margin: auto;" /&gt;

---

# Challenge questions

* What does `\(\left\{3 + \frac{1}{n}\right\}\)` converge to?
* What about `\(\left\{ (3 + \frac{1}{n} ) (100  + \frac{1}{n^4} ) \right\}\)`?
* Finally, `\(\left\{ \frac{ 300 + \frac{1}{n} }{100  + \frac{1}{n^4}} \right\}\)`?

---

# Limits

* Sequences `\(\leadsto\)` limits of functions
* Calculus/Real Analysis: study of functions on the **real line**
* Limit of a function: how does a function behave as it gets close to a particular point?  

--

## Uses of limits

* Derivatives
* Asymptotics 
* Game Theory 

---

# Limit of a function

&lt;img src="02-sequences-limits_files/figure-html/lim-sin-x-1.gif" width="80%" style="display: block; margin: auto;" /&gt;

---

# Limit of a function

* Suppose `\(f: \Re \rightarrow \Re\)`
* We say that `\(f\)` has a limit `\(L\)` at `\(x_{0}\)` if, for `\(\epsilon&gt;0\)`, there is a `\(\delta&gt;0\)` such that

    `$$|f(x) - L| &lt; \epsilon \, \forall \, x \backepsilon 0 &lt; |x - x_0 | &lt; \delta$$`

--

`$$|f(x) - L| &lt; \epsilon \,$$` there's an epsilon larger than the distance between f(x) and the limit 

--
$$\forall \, x \backepsilon $$ for all x, such that,

--
`$$0 &lt; |x - x_0 | &lt; \delta$$` the difference between x and `\(x_0\)` bounded between 0 and some other delta (it ust be closer to 0 than `\(\delta\)`)


---

&lt;img src="https://math.libretexts.org/@api/deki/files/9980/CNX_Calc_Figure_02_05_001.jpeg?revision=1" width="100%" style="display: block; margin: auto;" /&gt;

source: [math 210](https://math.libretexts.org/Courses/Monroe_Community_College/MTH_210_Calculus_I_%28Professor_Dean%29/Chapter_2_Limits/2.7%3A_The_Precise_Definition_of_a_Limit)


---

# Limits, cont'd

* Limits are about the behavior of functions at **points**. Here `\(x_{0}\)`
* As with sequences, we let `\(\epsilon\)` define an **error rate**
* `\(\delta\)` defines an area around `\(x_{0}\)` where `\(f(x)\)` is going to be within our error rate

---

# Examples of limits

* The function `\(f(x) = x + 1\)` has a limit of `\(1\)` at `\(x_{0} = 0\)`

&lt;img src="02-sequences-limits_files/figure-html/limit-xplus1-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Proof

* **Without loss of generalization** (WLOG) choose `\(\epsilon &gt;0\)`
* Show that there is `\(\delta_{\epsilon}\)` such that

    `$$|f(x) - L| &lt; \epsilon \, \text{for all} \, x \, \text{such that} \, 0 &lt; |x - x_0 | &lt; \delta$$`

    `$$\begin{aligned}|(x + 1) - 1| &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x - 0 | &lt; \delta \\|x| &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x | &lt; \delta \\\end{aligned}$$`

--

* But if `\(\delta_{\epsilon}  = \epsilon\)` then this holds

---

# `\(f(x_{0} ) \neq L\)`

* A function can have a limit of `\(L\)` at `\(x_{0}\)` even if `\(f(x_{0} ) \neq L\)`

--
* The function `\(f(x) = \frac{x^2 - 1}{x - 1}\)` has a limit of `\(2\)` at `\(x_{0} = 1\)`

&lt;img src="02-sequences-limits_files/figure-html/limit-discontinuous-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# `\(f(x_{0} ) \neq L\)`

* For all `\(x \neq 1\)`,

    `$$\begin{aligned}\frac{x^2 - 1}{x - 1} &amp; = \frac{(x + 1)(x - 1) }{x - 1} \\													&amp; = x + 1 \end{aligned}$$`
  
* Choose `\(\epsilon &gt;0\)` and set `\(x_{0}=1\)`.  Then, we're looking for `\(\delta_{\epsilon}\)` such that

    `$$\begin{aligned}|(x + 1) -2 | &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x - 1 | &lt; \delta \\|x - 1 | &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x - 1 | &lt; \delta \\\end{aligned}$$`

* If `\(\delta_{\epsilon} = \epsilon\)`, then this is satisfied

---

# Not all functions have limits

Consider `\(f:(0,1) \rightarrow \Re\)`, `\(f(x) = \frac{1}{x}\)`.  `\(f(x)\)` does not have a limit at `\(x_{0}=0\)` 

&lt;img src="02-sequences-limits_files/figure-html/limit-none-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Not all functions have limits

* Choose `\(\epsilon&gt;0\)`. We need to show that there **does not** exist

    `$$\begin{aligned}|\frac{1}{x} - L| &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x - 0 | &lt; \delta \\|\frac{1}{x} - L| &lt; \epsilon \, \text{for all} \, x \, &amp;\text{such that} \, 0 &lt; |x| &lt; \delta \\\end{aligned}$$`

* But, there is a problem

    `$$\begin{aligned}\frac{1}{x} - L &amp; &lt; \epsilon \\\frac{1}{x} &amp; &lt; \epsilon + L \\x &amp; &gt; \frac{1}{L + \epsilon}  \end{aligned}$$`
  
* This implies that there **can't** be a `\(\delta\)`

---
# When there are no limits!
&lt;img src="https://media.giphy.com/media/7JvlHfd7C2GDr7zfZF/giphy.gif" width="80%" style="display: block; margin: auto;" /&gt;
--
When there is no limit, this has a lot of implications for us w/r/t (with respect to) how we can expect the function(s) to behave and what we can do with the function(s) mathematically.
---

# Intuitive definition of a limit

`$$\lim_{x \rightarrow x_{0}} f(x) = L$$`

--

## Right-hand limits

`$$\lim_{x \rightarrow x_{0}^{+} } f(x) = L$$`

--

## Left-hand limits

`$$\lim_{x \rightarrow x_{0}^{-} } f(x) = L$$`

---

# Algebra of limits

Suppose `\(f:\Re \rightarrow \Re\)` and `\(g: \Re \rightarrow \Re\)` with limits `\(A\)` and `\(B\)` at `\(x_{0}\)`. Then,

$$
`\begin{aligned}
\text{i.) } \lim_{x \rightarrow x_{0} } (f(x) + g(x) ) &amp; = \lim_{x \rightarrow x_{0}} f(x) + \lim_{x \rightarrow x_{0}} g(x)  = A + B \\
\text{ii.) }\lim_{x \rightarrow x_{0} } f(x) g(x) &amp; = \lim_{x \rightarrow x_{0}} f(x) \lim_{x\rightarrow x_{0}} g(x)  = A B 
\end{aligned}`
$$

--

Suppose `\(g(x) \neq 0\)` for all `\(x \in \Re\)` and `\(B \neq 0\)` then `\(\frac{f(x)}{g(x)}\)` has a limit at `\(x_{0}\)` and

`$$\lim_{x \rightarrow x_{0}} \frac{f(x)}{g(x)} =  \frac{\lim_{x\rightarrow x_{0} } f(x) }{\lim_{x \rightarrow x_{0} } g(x) } = \frac{A}{B}$$`

---

# Continuity

&lt;img src="02-sequences-limits_files/figure-html/continuity-1.png" width="864" style="display: block; margin: auto;" /&gt;

* Limit exists at 1 
* But hole in function 
* Fails the **pencil** test, **discontinuous** at 1

---

# Defining continuity

* Suppose `\(f:\Re \rightarrow \Re\)` and consider `\(x_{0} \in \Re\)`
* `\(f\)` is continuous at `\(x_{0}\)` if for each `\(\epsilon&gt;0\)` there is a `\(\delta&gt;0\)` such that if,

    `$$\begin{aligned}|x - x_{0} | &amp; &lt; \delta \text{ for all  } x \in \Re \text{ then } \nonumber \\|f(x) - f(x_{0})| &amp; &lt; \epsilon \nonumber \end{aligned}$$`

--

* Previously `\(f(x_{0})\)` was replaced with `\(L\)`
* Now: `\(f(x)\)` has to converge on itself at `\(x_{0}\)`
* **Continuity is more restrictive than limit**

---

# Examples of continuity

&lt;img src="02-sequences-limits_files/figure-html/continuity-abs-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Examples of continuity

&lt;img src="02-sequences-limits_files/figure-html/continuity-cos-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Examples of continuity

&lt;img src="02-sequences-limits_files/figure-html/continuity-x-sq-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

# Measuring incumbency advantage

* Incumbency advantage
* U.S. House of Representatives
* Win rate of incumbent parties `\(&gt;90\%\)`
* Win rate of incumbent candidates `\(\approx 90\%\)` (conditional on running for election)
    * `\(88\%\)` probability of running for reelection
--
* Runners-up
    * `\(3\%\)` chance of winning the next election
    * Only `\(20\%\)` chance of running in the next election
* Is there an electoral advantage to incumbency?
* Can this be proven through observational study?

---

# Ideal experiment

* Randomly assign incumbent parties in a district between Democrats and Republicans
* Keep all other factors constant
* Corresponding increase in Democratic electoral success in the next election would represent the overall electoral benefit due to being the incumbent party in the district
* Realistic?

---

# Regression discontinuity design

* Dichotomous treatment is a deterministic function of a single, continuous covariate
* Treatment is assigned to those individuals whose score crosses a known threshold
* If you know the score, you can reverse-engineer the treatment assignment
* Assumes as-if random assignment in the local neighborhood around a probability of `\(50\%\)`

---

# RDD + incumbency advantage

&lt;img src="images/rdd-incumbency-advantage.png" width="80%" style="display: block; margin: auto;" /&gt;

Source: [Lee, D. S. (2008). Randomized experiments from non-random selection in US House elections. *Journal of Econometrics*, 142(2), 675-697.](https://www.sciencedirect.com/science/article/pii/S0304407607001121)

---

# Continuity and limits

* Let `\(f: \Re \rightarrow \Re\)` with `\(x_{0} \in \Re\)`
* Then `\(f\)` is continuous at `\(x_{0}\)` if and only if `\(f\)` has a limit at `\(x_{0}\)` and that `\(\lim_{x \rightarrow x_{0} } f(x) = f(x_{0})\)`
--

* Suppose `\(f\)` is continuous at `\(x_{0}\)`
    * This implies that `\(|f(x) - f(x_0)| &lt; \epsilon \, \text{for all} \, x \, \text{such that} \, |x - x_0 | &lt; \delta\)`
    * Definition of a **limit**, with `\(L = f(x_{0})\)`
--

* Suppose `\(f\)` has a limit at `\(x_{0}\)` and that limit is `\(f(x_{0})\)`
    * This implies that `\(|f(x) - f(x_0)| &lt; \epsilon \, \text{for all} \, x \, \text{such that} \, |x - x_0 | &lt; \delta\)`
    * This is the definition of **continuity**

---

# Algebra of continuous functions

Suppose `\(f:\Re \rightarrow \Re\)` and `\(g:\Re \rightarrow \Re\)` are continuous at `\(x_{0}\)`. Then,

1. `\(f(x) + g(x)\)` is continuous at `\(x_{0}\)`
1. `\(f(x) g(x)\)` is continuous at `\(x_{0}\)`
1. If `\(g(x_0) \neq 0\)`, then `\(\frac{f(x) } {g(x) }\)` is continuous at `\(x_{0}\)` 


---
class: center, middle, inverse

# RECAP


---
# Today's concepts:

* Sequences
  * arithmetic 
  * geometric
  * logs
  * convergence 
* Limits
  * continuity
  * what they tell us
  * how to find them
  
---
# NEXT UP!

* DERIVATIVES!!!!!!!!
* Check in with any questions! (clipperton@uchicago.edu)


### TA TEAM!
* Bailey Meche baileymeche@uchicago.edu
* Gabe Reichman gabereichman@uchicago.edu
* Shirley Zhang xueyan1220@uchicago.edu
* Stanley Yi yijiaying@uchicago.edu

---
class: center, middle, inverse
## Let’s get to know each other a bit more – Name, pronouns, subfield/research area, where you are currently, something fun/interesting about you and/or your hobbies

  
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "github",
  "highlightLines": true,
  "countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const slideshow = window.slideshow;
  if (!slideshow) return;

  // Create the toggle button
  const toggleBtn = document.createElement("button");
  toggleBtn.textContent = "☰ Menu";
  Object.assign(toggleBtn.style, {
    position: "fixed",
    bottom: "20px",
    left: "20px",
    zIndex: 1000,
    padding: "6px 10px",
    background: "#0B6884",
    color: "#fff",
    border: "none",
    borderRadius: "4px",
    cursor: "pointer",
    fontSize: "25px",
    fontFamily: "'Josefin Sans', Georgia, serif",
  });
  document.body.appendChild(toggleBtn);

  // Create the menu container
  const menu = document.createElement("div");
  Object.assign(menu.style, {
    position: "fixed",
    bottom: "60px",
    left: "20px",
    width: "260px",
    maxHeight: "70vh",
    overflowY: "auto",
    background: "#f5f5f5",
    border: "1px solid #ccc",
    padding: "10px",
    display: "none",
    zIndex: 1000,
    fontFamily: "sans-serif",
    fontSize: "14px",
    boxShadow: "0 2px 8px rgba(0,0,0,0.2)",
    borderRadius: "4px"
  });

  // Export to PDF button inside the menu
  const exportBtn = document.createElement("button");
  exportBtn.textContent = "📄 Export to PDF";
  Object.assign(exportBtn.style, {
    width: "100%",
    padding: "6px",
    marginBottom: "8px",
    border: "none",
    background: "#0B6884",
    color: "#fff",
    borderRadius: "3px",
    cursor: "pointer"
  });
  exportBtn.addEventListener("click", () => {
    menu.style.display = "none";
    window.print();
  });
  menu.appendChild(exportBtn);

  // Get all slides
  const allSlides = slideshow.getSlides();

  // Build menu items (skip incremental slides)
  let displayNumber = 1;
  allSlides.forEach((slide, internalIndex) => {
    if (slide.properties.continued === "true") {
      return; // skip incremental steps
    }

    const slideElement = document.querySelector(
      `.remark-slide-container:nth-of-type(${internalIndex + 1})`
    );
    const heading = slideElement?.querySelector("h1, h2, h3");
    const title = heading
      ? heading.textContent.trim()
      : `Slide ${displayNumber}`;

    const link = document.createElement("a");
    link.textContent = `${displayNumber}. ${title}`;
    Object.assign(link.style, {
      display: "block",
      color: "#0B6884",
      textDecoration: "none",
      marginBottom: "6px",
      padding: "4px 6px",
      borderRadius: "3px",
      userSelect: "none"
    });

    link.addEventListener("mouseenter", () => {
      link.style.background = "#ddd";
    });
    link.addEventListener("mouseleave", () => {
      link.style.background = "transparent";
    });

    // Use the actual remark.js 1-based slide index
    link.addEventListener("click", (e) => {
      e.preventDefault();
      menu.style.display = "none";
      slideshow.gotoSlide(internalIndex + 1);
    });

    menu.appendChild(link);
    displayNumber++;
  });

  document.body.appendChild(menu);

  // Toggle menu
  toggleBtn.addEventListener("click", () => {
    menu.style.display = menu.style.display === "none" ? "block" : "none";
  });

  // Close on slide change
  slideshow.on("afterShowSlide", () => {
    menu.style.display = "none";
  });
});
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
